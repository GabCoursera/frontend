@(page: MetaData, idRequest: services.IdentityRequest, idUrlBuilder: services.IdentityUrlBuilder, user: com.gu.identity.model.User, comments: Seq[discussion.model.Comment])(implicit request: RequestHeader)

@import views.html.fragments.registrationFooter
@import conf.Switches

@identityMain(page, Switches.all){
}{
<div class="identity-wrapper monocolumn-wrapper identity-public-profile">
@if(Switches.IdentityCommentHistory.isSwitchedOn){
    <div class="tabs u-cf identity-section">
        <ol class="tabs__container tone-news js-tabs" id="js-account-profile-tabs" role="tablist" data-is-bound="true">
            <li class="tabs__tab tabs__tab--selected tone-colour tone-accent-border" role="tab" id="tabs-account-profile-1-tab" aria-selected="true" aria-controls="tabs-account-profile-1">
                <a href="#tabs-account-profile-1" data-link-name="tab 1 Public Profile" data-pushstate-url="">Profile</a>
            </li>
            <li class="tabs__tab" role="tab" id="tabs-account-profile-2-tab" aria-controls="tabs-account-profile-2" aria-selected="false">
                <a href="#tabs-account-profile-2" data-link-name="tab 2 Comment History" data-pushstate-url="">Comment History</a>
            </li>
        </ol>


        <div class="tabs__content">
            <div id="tabs-account-profile-1" class="tabs__pane u-cf" role="tabpanel" aria-labelledby="tabs-account-profile-1-tab" data-link-name="Public Profile" data-link-context="Identity/profile">

                    <div class="fieldset__heading u-cf">
                        <div class="user-avatar" data-userid="@user.id"></div>
                        <h1 class="form__heading">
                            @user.publicFields.displayName
                        </h1>
                        @user.dates.accountCreatedDate.map { joinDate =>
                            <p class="form-field__note">Joined: @joinDate.toString("d MMM yyyy")</p>
                        }
                    </div>
                    <div class="fieldset__fields">
                        <ul class="unstyled">
                            <li class="form-field">
                                <h4>Location:</h4>
                                <p class="identity-section__text">@user.publicFields.location</p>
                            </li>
                            <li class="form-field">
                                <h4>About Me: </h4>
                                <p class="identity-section__text">@user.publicFields.aboutMe</p>
                            </li>
                            <li class="form-field">
                                <h4>Interests: </h4>
                                <p class="identity-section__text">@user.publicFields.interests</p>
                            </li>
                            <li class="form-field">
                                <h4>Web page: </h4>
                                <p class="identity-section__text"><a href="@user.publicFields.webPage" rel="nofollow">@user.publicFields.webPage</a></p>
                            </li>
                        </ul>
                    </div>

            </div><!-- !tab1 -->

            <div id="tabs-account-profile-2" class="tabs__pane u-cf" role="tabpanel" aria-labelledby="tabs-account-profile-2-tab" data-link-name="Account" data-link-context="Identity/profile" style="display: none;">



            </div><!-- !tab2 -->

        </div><!-- !tabs -->
    </div>
    }else{
        <div class="identity-section form">
            <div class="fieldset__heading u-cf">
                <div class="user-avatar" data-userid="@user.id"></div>
                <h1 class="form__heading">
                    @user.publicFields.displayName
                </h1>
                @user.dates.accountCreatedDate.map { joinDate =>
                    <p class="form-field__note">Joined: @joinDate.toString("d MMM yyyy")</p>
                }
            </div>
            <div class="fieldset__fields">
                <ul class="unstyled">
                    <li class="form-field">
                        <h4>Location:</h4>
                        <p class="identity-section__text">@user.publicFields.location</p>
                    </li>
                    <li class="form-field">
                        <h4>About Me: </h4>
                        <p class="identity-section__text">@user.publicFields.aboutMe</p>
                    </li>
                    <li class="form-field">
                        <h4>Interests: </h4>
                        <p class="identity-section__text">@user.publicFields.interests</p>
                    </li>
                    <li class="form-field">
                        <h4>Web page: </h4>
                        <p class="identity-section__text"><a href="@user.publicFields.webPage" rel="nofollow">@user.publicFields.webPage</a></p>
                    </li>
                </ul>
            </div>
        </div>

        @comments.map { comment =>
            @fragments.commentHistoryComment(comment, false, comment.responseTo.isDefined, false)
        }
    }

    @registrationFooter(page, idRequest, idUrlBuilder)
</div><!-- !.identity-wrapper -->
}
